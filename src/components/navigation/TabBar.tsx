import { Ionicons, Feather, } from '@expo/vector-icons';
import { BottomTabBarProps } from '@react-navigation/bottom-tabs';
import { fonts } from '@utils';
import React from 'react';
import { Image, StyleSheet, Text, TouchableOpacity, View } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';
import { Path, Svg } from 'react-native-svg';

const TabBar = ({ state, descriptors, navigation }: BottomTabBarProps) => {
  const insets = useSafeAreaInsets();
  return (
    <View style={[styles.tabBg, { paddingBottom: insets.bottom }]}>
      {state.routes.map((route, idx) => {
        const { options } = descriptors[route.key];
        const label = route.name;
        let iconPathD = "M27.3538 12.9713L17.3538 3.53632C17.3489 3.53206 17.3443 3.52746 17.34 3.52257C16.9718 3.18774 16.492 3.0022 15.9944 3.0022C15.4967 3.0022 15.0169 3.18774 14.6488 3.52257L14.635 3.53632L4.64625 12.9713C4.4425 13.1587 4.27985 13.3863 4.16861 13.6398C4.05737 13.8932 3.99996 14.167 4 14.4438V26.0001C4 26.5305 4.21071 27.0392 4.58579 27.4143C4.96086 27.7894 5.46957 28.0001 6 28.0001H12C12.5304 28.0001 13.0391 27.7894 13.4142 27.4143C13.7893 27.0392 14 26.5305 14 26.0001V20.0001H18V26.0001C18 26.5305 18.2107 27.0392 18.5858 27.4143C18.9609 27.7894 19.4696 28.0001 20 28.0001H26C26.5304 28.0001 27.0391 27.7894 27.4142 27.4143C27.7893 27.0392 28 26.5305 28 26.0001V14.4438C28 14.167 27.9426 13.8932 27.8314 13.6398C27.7201 13.3863 27.5575 13.1587 27.3538 12.9713ZM26 26.0001H20V20.0001C20 19.4696 19.7893 18.9609 19.4142 18.5859C19.0391 18.2108 18.5304 18.0001 18 18.0001H14C13.4696 18.0001 12.9609 18.2108 12.5858 18.5859C12.2107 18.9609 12 19.4696 12 20.0001V26.0001H6V14.4438L6.01375 14.4313L16 5.00007L25.9875 14.4288L26.0012 14.4413L26 26.0001Z";
        let size = "32";
        if (label === 'Home') {
          iconPathD = "M27.3538 12.9713L17.3538 3.53632C17.3489 3.53206 17.3443 3.52746 17.34 3.52257C16.9718 3.18774 16.492 3.0022 15.9944 3.0022C15.4967 3.0022 15.0169 3.18774 14.6488 3.52257L14.635 3.53632L4.64625 12.9713C4.4425 13.1587 4.27985 13.3863 4.16861 13.6398C4.05737 13.8932 3.99996 14.167 4 14.4438V26.0001C4 26.5305 4.21071 27.0392 4.58579 27.4143C4.96086 27.7894 5.46957 28.0001 6 28.0001H12C12.5304 28.0001 13.0391 27.7894 13.4142 27.4143C13.7893 27.0392 14 26.5305 14 26.0001V20.0001H18V26.0001C18 26.5305 18.2107 27.0392 18.5858 27.4143C18.9609 27.7894 19.4696 28.0001 20 28.0001H26C26.5304 28.0001 27.0391 27.7894 27.4142 27.4143C27.7893 27.0392 28 26.5305 28 26.0001V14.4438C28 14.167 27.9426 13.8932 27.8314 13.6398C27.7201 13.3863 27.5575 13.1587 27.3538 12.9713ZM26 26.0001H20V20.0001C20 19.4696 19.7893 18.9609 19.4142 18.5859C19.0391 18.2108 18.5304 18.0001 18 18.0001H14C13.4696 18.0001 12.9609 18.2108 12.5858 18.5859C12.2107 18.9609 12 19.4696 12 20.0001V26.0001H6V14.4438L6.01375 14.4313L16 5.00007L25.9875 14.4288L26.0012 14.4413L26 26.0001Z";
        } else if (label === 'Menu') {
          iconPathD = "M2.8 4.66667V3.73333C2.58431 3.73346 2.37533 3.80829 2.20858 3.94509C2.04183 4.0819 1.92761 4.27223 1.88533 4.48373L2.8 4.66667ZM25.2 4.66667L26.1147 4.48373C26.0724 4.27223 25.9582 4.0819 25.7914 3.94509C25.6247 3.80829 25.4157 3.73346 25.2 3.73333V4.66667ZM27.0667 14V14.9333C27.2047 14.9333 27.341 14.9026 27.4657 14.8434C27.5905 14.7843 27.7005 14.6983 27.788 14.5915C27.8755 14.4848 27.9382 14.3599 27.9717 14.226C28.0051 14.0921 28.0084 13.9524 27.9813 13.8171L27.0667 14ZM0.933333 14L0.0186667 13.8171C-0.00838759 13.9524 -0.00508288 14.0921 0.0283427 14.226C0.0617683 14.3599 0.124483 14.4848 0.211967 14.5915C0.299452 14.6983 0.409529 14.7843 0.534268 14.8434C0.659007 14.9026 0.795302 14.9333 0.933333 14.9333V14ZM6.53333 19.6H5.6V20.5333H6.53333V19.6ZM21.4667 19.6V20.5333H22.4V19.6H21.4667ZM0 28H28V26.1333H0V28ZM1.86667 14V27.0667H3.73333V14H1.86667ZM24.2667 14V27.0667H26.1333V14H24.2667ZM2.8 5.6H25.2V3.73333H2.8V5.6ZM24.2853 4.8496L26.152 14.1829L27.9813 13.8171L26.1147 4.48373L24.2853 4.8496ZM27.0667 13.0667H0.933333V14.9333H27.0667V13.0667ZM1.848 14.1829L3.71467 4.8496L1.88533 4.48373L0.0186667 13.8171L1.848 14.1829ZM1.86667 1.86667H26.1333V0H1.86667V1.86667ZM5.6 14V19.6H7.46667V14H5.6ZM6.53333 20.5333H21.4667V18.6667H6.53333V20.5333ZM22.4 19.6V14H20.5333V19.6H22.4Z";
          size = "29";
        } else if (label === 'Favourite') {
          iconPathD = "M5.46875 4.375C5.17867 4.375 4.90047 4.49023 4.69535 4.69535C4.49023 4.90047 4.375 5.17867 4.375 5.46875C4.375 5.75883 4.49023 6.03703 4.69535 6.24215C4.90047 6.44727 5.17867 6.5625 5.46875 6.5625H6.00688C6.24437 6.56291 6.47529 6.64062 6.66472 6.78387C6.85415 6.92713 6.9918 7.12815 7.05688 7.35656L10.5263 19.4972C10.7225 20.1823 11.1364 20.7849 11.7055 21.2139C12.2746 21.6429 12.9679 21.875 13.6806 21.875H23.6753C24.3312 21.8751 24.9721 21.6786 25.5153 21.3109C26.0584 20.9432 26.4789 20.4212 26.7225 19.8122L29.9469 11.7491C30.0794 11.4173 30.1287 11.0581 30.0904 10.7028C30.052 10.3476 29.9273 10.0072 29.727 9.71132C29.5267 9.41544 29.2571 9.17312 28.9415 9.00554C28.626 8.83796 28.2742 8.75023 27.9169 8.75H9.73L9.15906 6.755C8.96334 6.06982 8.54988 5.46697 7.98118 5.03759C7.41249 4.6082 6.71947 4.37562 6.00688 4.375H5.46875ZM12.6306 18.8934L10.3556 10.9375H27.9147L24.6903 19.0006C24.6091 19.2034 24.469 19.3772 24.2881 19.4996C24.1072 19.622 23.8937 19.6874 23.6753 19.6875H13.6806C13.4431 19.6871 13.2122 19.6094 13.0228 19.4661C12.8334 19.3229 12.6957 19.1218 12.6306 18.8934ZM14.2188 30.625C14.6497 30.625 15.0763 30.5401 15.4744 30.3752C15.8725 30.2103 16.2343 29.9686 16.5389 29.6639C16.8436 29.3593 17.0853 28.9975 17.2502 28.5994C17.4151 28.2013 17.5 27.7746 17.5 27.3438C17.5 26.9129 17.4151 26.4862 17.2502 26.0881C17.0853 25.69 16.8436 25.3282 16.5389 25.0236C16.2343 24.7189 15.8725 24.4772 15.4744 24.3123C15.0763 24.1474 14.6497 24.0625 14.2188 24.0625C13.3485 24.0625 12.5139 24.4082 11.8986 25.0236C11.2832 25.6389 10.9375 26.4735 10.9375 27.3438C10.9375 28.214 11.2832 29.0486 11.8986 29.6639C12.5139 30.2793 13.3485 30.625 14.2188 30.625ZM14.2188 28.4375C13.9287 28.4375 13.6505 28.3223 13.4454 28.1171C13.2402 27.912 13.125 27.6338 13.125 27.3438C13.125 27.0537 13.2402 26.7755 13.4454 26.5704C13.6505 26.3652 13.9287 26.25 14.2188 26.25C14.5088 26.25 14.787 26.3652 14.9921 26.5704C15.1973 26.7755 15.3125 27.0537 15.3125 27.3438C15.3125 27.6338 15.1973 27.912 14.9921 28.1171C14.787 28.3223 14.5088 28.4375 14.2188 28.4375ZM22.9688 30.625C23.3997 30.625 23.8263 30.5401 24.2244 30.3752C24.6225 30.2103 24.9843 29.9686 25.2889 29.6639C25.5936 29.3593 25.8353 28.9975 26.0002 28.5994C26.1651 28.2013 26.25 27.7746 26.25 27.3438C26.25 26.9129 26.1651 26.4862 26.0002 26.0881C25.8353 25.69 25.5936 25.3282 25.2889 25.0236C24.9843 24.7189 24.6225 24.4772 24.2244 24.3123C23.8263 24.1474 23.3997 24.0625 22.9688 24.0625C22.0985 24.0625 21.2639 24.4082 20.6486 25.0236C20.0332 25.6389 19.6875 26.4735 19.6875 27.3438C19.6875 28.214 20.0332 29.0486 20.6486 29.6639C21.2639 30.2793 22.0985 30.625 22.9688 30.625ZM22.9688 28.4375C22.6787 28.4375 22.4005 28.3223 22.1954 28.1171C21.9902 27.912 21.875 27.6338 21.875 27.3438C21.875 27.0537 21.9902 26.7755 22.1954 26.5704C22.4005 26.3652 22.6787 26.25 22.9688 26.25C23.2588 26.25 23.537 26.3652 23.7422 26.5704C23.9473 26.7755 24.0625 27.0537 24.0625 27.3438C24.0625 27.6338 23.9473 27.912 23.7422 28.1171C23.537 28.3223 23.2588 28.4375 22.9688 28.4375Z";
          size = "35";
        } else if (label === 'Profile') {
          iconPathD = "M15 5C16.3261 5 17.5979 5.52678 18.5355 6.46447C19.4732 7.40215 20 8.67392 20 10C20 11.3261 19.4732 12.5979 18.5355 13.5355C17.5979 14.4732 16.3261 15 15 15C13.6739 15 12.4021 14.4732 11.4645 13.5355C10.5268 12.5979 10 11.3261 10 10C10 8.67392 10.5268 7.40215 11.4645 6.46447C12.4021 5.52678 13.6739 5 15 5ZM15 7.5C14.337 7.5 13.7011 7.76339 13.2322 8.23223C12.7634 8.70107 12.5 9.33696 12.5 10C12.5 10.663 12.7634 11.2989 13.2322 11.7678C13.7011 12.2366 14.337 12.5 15 12.5C15.663 12.5 16.2989 12.2366 16.7678 11.7678C17.2366 11.2989 17.5 10.663 17.5 10C17.5 9.33696 17.2366 8.70107 16.7678 8.23223C16.2989 7.76339 15.663 7.5 15 7.5ZM15 16.25C18.3375 16.25 25 17.9125 25 21.25V25H5V21.25C5 17.9125 11.6625 16.25 15 16.25ZM15 18.625C11.2875 18.625 7.375 20.45 7.375 21.25V22.625H22.625V21.25C22.625 20.45 18.7125 18.625 15 18.625Z";
          size = "30";
        };
        const isFocused = state.index === idx;
        const onPress = () => {
          const event = navigation.emit({
            type: 'tabPress',
            target: route.key,
            canPreventDefault: true,
          });
          if (!isFocused && !event.defaultPrevented) {
            navigation.navigate(route.name, { merge: true });
          }
        };
        const onLongPress = () => {
          navigation.emit({
            type: 'tabLongPress',
            target: route.key,
          });
        };
        return (
          <TouchableOpacity
            accessibilityRole="button"
            accessibilityState={isFocused ? { selected: true } : {}}
            accessibilityLabel={options.tabBarAccessibilityLabel}
            onPress={onPress}
            onLongPress={onLongPress}
            style={styles.tabButton}
            key={route.name}
          >
            <Svg
              height={size}
              width={size}
              viewBox={`0 0 ${size} ${size}`}
            >
              <Path
                fill="black"
                d={iconPathD}
              />
            </Svg>
            <View style={[styles.tabLine, isFocused && styles.tabActive]} />
          </TouchableOpacity>
        );
      })}
    </View>
  );
};

export default TabBar;

const styles = StyleSheet.create({
  tabBg: {
    flexDirection: "row",
    alignItems: "flex-end",
    justifyContent: "space-between",
    backgroundColor: "white",
    borderTopRightRadius: 30,
    borderTopLeftRadius: 30,
    paddingHorizontal: 30,
    paddingTop: 20
  },
  tabButton: {
    alignItems: 'center',
    justifyContent: 'center',
    height: 30,
    gap: 2,
    width: 40
  },
  tabIcon: {
    width: 32,
    height: 32
  },
  tabLine: {
    backgroundColor: "transparent",
    borderRadius: 2,
    color: "transparent",
    fontSize: 14,
    fontFamily: fonts.I_400,
    height: 5,
    width: 24
  },
  tabActive: {
    backgroundColor: "#4CAF50"
  }
});